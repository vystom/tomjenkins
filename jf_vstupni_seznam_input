pipeline {
    agent any
    stages {
        stage('Nacteni souboru') {
            steps {
            
                echo "Kde jsem"
                sh "pwd; hostname; users"
                //prihlasit se pres klic na server pod sbserv
                //nize uveden asi do solo skriptu prel nebo bash
                sh "cd /home/tomino; ls -1 $maska"

            }

        currentBuild.displayName = "  ${env.BUILD_ID} -  ${currentBuild.currentResult} "
        }

        stage('Vyber souboru souboru') {
            input {
                message "Vyber soubory ke kopirovani"
                ok 'Pokracuj'
                parameters {
                    extendedChoice(
                                name: 'vstupni_seznam', 
                                defaultValue: 'Build & Deploy', 
                                multiSelectDelimiter: ',', 
                                quoteValue: false, 
                                saveJSONParameterToFile: false, 
                                type: 'PT_MULTI_SELECT',
                                value:'soubor1, soubor2, soubor3, soubor4',
                                //value:'soubor1  soubor2  soubor3  soubor4',
                                visibleItemCount: 10,
                                description: 'Soubory PZ02 ke skopirovani'
                            )
                }
            }
            steps {
                echo "Tvoje soubory ${vstupni_seznam}"
                script {
                    vstupni_seznam.eachLine { println "$it" }
                    //[vstupni_seznam].eachLine { println "$it" }
                    //[vstupni_seznam].each { print "$it" }
                   
		            def seznam = []
		            //str = vstupni_seznam.split(',')
      		        for( String hodnoty : vstupni_seznam.split(',')  )
                    seznam << hodnoty
		   
		            println "velikost seznamu je "+seznam.size()
		            println "seznam0 = " + seznam[0]
		            println "seznam2 = " + seznam[2]
		            println "cely seznam = " + seznam
                
		  	        for (i = 0; i <seznam.size(); i++) {
   				        println "Soubor[$i]= "+seznam[i]
		            }
                }    
            }
        }
    }
}

currentBuild.displayName = "  ${env.BUILD_ID} -  ${currentBuild.currentResult} "